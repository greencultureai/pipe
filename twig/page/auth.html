{% extends "layout/html.html" %}

{% block body %}

<h1>Authenticate</h1>

<form action="?r=%2Fbrowse" autocomplete="x" method="post">

<div class="form-group">
	<label>RCE</label>
	<select class="form-control" id="rce" name="rce">
	<option value="">- Select RCE -</option>
	{% for rce_stub, rce_data in rce_list %}
		<option data-engine="{{ rce_data.engine }}" {{ rce_stub == rce_code ? "selected " }} value="{{ rce_stub }}">{{ rce_data.name ? rce_data.name : rce_stub }}</option>
	{% endfor %}
	</select>
</div>

<div class="form-group" data-biotrack="true" data-leafdata="true">
	<label>Company:</label>
	<input autocomplete="x" class="form-control" name="company" placeholder="Company ID, like a UBI or something - BioTrack, LeafData" value="{{ rce_company }}">
</div>

<div class="form-group" data-leafdata="true" data-metrc="true">
	<label>License:</label>
	<input autocomplete="x" class="form-control" name="license" placeholder="LeafData, METRC*" value="{{ rce_license }}">
</div>

<div class="form-group" data-metrc="true">
	<label>Vendor API Key:</label>
	<input autocomplete="x" class="form-control" name="vendor-psk" placeholder="METRC" value="{{ rce_vendor_psk }}">
</div>

<div class="form-group" data-leafdata="true" data-metrc="true">
	<label>Client API Key:</label>
	<input autocomplete="x" class="form-control" name="client-psk" placeholder="LeafData, METRC" value="{{ rce_client_psk }}">
</div>

<div class="form-group" data-biotrack="true">
	<label>Username:</label>
	<input autocomplete="x" class="form-control" name="username" placeholder="BioTrack" value="{{ rce_username }}">
</div>

<div class="form-group" data-biotrack="true">
	<label>Password:</label>
	<input autocomplete="x" class="form-control" name="password" placeholder="BioTrack" value="{{ rce_password }}">
</div>

<button class="btn btn-lg btn-outline-primary" type="submit">Connect</button>

</form>

{% endblock %}

{% block foot_script %}

{{ parent() }}

<script>
$(function() {
	$('#rce').on('change', function() {

		var $opt = $(this).find(':selected');
		var eng = $opt.data('engine');

		$('div[data-biotrack="true"]').hide();
		$('div[data-leafdata="true"]').hide();
		$('div[data-metrc="true"]').hide();

		var sel = 'div[data-' + eng + '="true"]';
		$(sel).show();

	});
});
</script>

{% endblock %}
